<!DOCTYPE HTML>
<html lang="en" >
    
    <head>
        
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=11; IE=10; IE=9; IE=8; IE=7; IE=EDGE" />
        <title>TCP Server | Vert.x 3.0 文档翻译</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.0.1">
        
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">
        
    
    
    <link rel="next" href="../Core/tcp_client.html" />
    
    
    <link rel="prev" href="../Core/writing_tcp_servers_and_clients.html" />
    

        
    </head>
    <body>
        
        
    <link rel="stylesheet" href="../gitbook/style.css">
    
    

        
    <div class="book" data-level="1.12.1" data-basepath=".." data-revision="Fri Jul 31 2015 12:05:33 GMT+0800 (中国标准时间)">
    

<div class="book-summary">
    <div class="book-search">
        <input type="text" placeholder="Type to search" class="form-control" />
    </div>
    <ul class="summary">
        
        
        
        

        

        
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../index.html">
                        <i class="fa fa-check"></i>
                        
                        Introduction
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="1" data-path="Core/core.html">
            
                
                    <a href="../Core/core.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                        Core
                    </a>
                
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1" data-path="Core/in_the_beginning_there_was_vertx.html">
            
                
                    <a href="../Core/in_the_beginning_there_was_vertx.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.</b>
                        
                        In the beginning there was Vertx
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="Core/are_you_fluent.html">
            
                
                    <a href="../Core/are_you_fluent.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.2.</b>
                        
                        Are you fluent?
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="Core/dont_call_us,_well_call_you.html">
            
                
                    <a href="../Core/dont_call_us,_well_call_you.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.3.</b>
                        
                        Don’t call us we will call you.
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="Core/dont_block_me.html">
            
                
                    <a href="../Core/dont_block_me.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.4.</b>
                        
                        Don’t block me!
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="Core/reactor_and_multi-reactor.html">
            
                
                    <a href="../Core/reactor_and_multi-reactor.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.5.</b>
                        
                        Reactor and Multi-Reactor
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="Core/the_golden_rule_-_dont_block_the_event_loop.html">
            
                
                    <a href="../Core/the_golden_rule_-_dont_block_the_event_loop.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.6.</b>
                        
                        The Golden Rule - Don’t Block the Event Loop
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="Core/running_blocking_code.html">
            
                
                    <a href="../Core/running_blocking_code.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.7.</b>
                        
                        Running blocking code
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="Core/verticles.html">
            
                
                    <a href="../Core/verticles.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.8.</b>
                        
                        Verticles
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="Core/the_event_bus.html">
            
                
                    <a href="../Core/the_event_bus.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.9.</b>
                        
                        The Event Bus
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="Core/json.html">
            
                
                    <a href="../Core/json.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.10.</b>
                        
                        JSON
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="Core/buffers.html">
            
                
                    <a href="../Core/buffers.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.11.</b>
                        
                        Buffers
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="Core/writing_tcp_servers_and_clients.html">
            
                
                    <a href="../Core/writing_tcp_servers_and_clients.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.12.</b>
                        
                        Writing TCP servers and clients
                    </a>
                
            
            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="1.12.1" data-path="Core/tcp_server.html">
            
                
                    <a href="../Core/tcp_server.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.12.1.</b>
                        
                        TCP Server
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="1.12.2" data-path="Core/tcp_client.html">
            
                
                    <a href="../Core/tcp_client.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.12.2.</b>
                        
                        TCP Client
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="1.12.3" data-path="Core/ssl_tls.html">
            
                
                    <a href="../Core/ssl_tls.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.12.3.</b>
                        
                        SSL TLS
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.13" data-path="Core/writing_http_servers_and_clients.html">
            
                
                    <a href="../Core/writing_http_servers_and_clients.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.13.</b>
                        
                        Writing HTTP servers and clients
                    </a>
                
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.13.1" data-path="Core/http_server.html">
            
                
                    <a href="../Core/http_server.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.13.1.</b>
                        
                        HTTP Server
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="1.13.2" data-path="Core/http_client.html">
            
                
                    <a href="../Core/http_client.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.13.2.</b>
                        
                        HTTP client
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.14" data-path="Core/using_shared_data_with_vertx.html">
            
                
                    <a href="../Core/using_shared_data_with_vertx.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.14.</b>
                        
                        Using Shared Data with Vert.x
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="1.15" data-path="Core/using_the_file_system_with_vertx.html">
            
                
                    <a href="../Core/using_the_file_system_with_vertx.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.15.</b>
                        
                        Using the file system with Vert.x
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="1.16" data-path="Core/datagram_sockets_udp.html">
            
                
                    <a href="../Core/datagram_sockets_udp.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.16.</b>
                        
                        Datagram sockets (UDP)
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="1.17" data-path="Core/dns_client.html">
            
                
                    <a href="../Core/dns_client.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.17.</b>
                        
                        DNS client
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="1.18" data-path="Core/streams.html">
            
                
                    <a href="../Core/streams.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.18.</b>
                        
                        Streams
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="1.19" data-path="Core/parse_tools.html">
            
                
                    <a href="../Core/parse_tools.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.19.</b>
                        
                        Parse tools
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="1.20" data-path="Core/thread_safety.html">
            
                
                    <a href="../Core/thread_safety.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.20.</b>
                        
                        Thread safety
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="1.21" data-path="Core/metrics_spi.html">
            
                
                    <a href="../Core/metrics_spi.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.21.</b>
                        
                        Metrics SPI
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="1.22" data-path="Core/clustering.html">
            
                
                    <a href="../Core/clustering.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.22.</b>
                        
                        Clustering
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="1.23" data-path="Core/security_notes.html">
            
                
                    <a href="../Core/security_notes.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.23.</b>
                        
                        Security notes
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2" data-path="Web/web.html">
            
            <span><b>2.</b> Web</span>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1" data-path="Web/re-cap_on_vertx_core_http_servers.html">
            
                
                    <a href="../Web/re-cap_on_vertx_core_http_servers.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.</b>
                        
                        Re-cap on Vert.x core HTTP servers
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="Web/basic_apex_concepts.html">
            
            <span><b>2.2.</b> Basic Apex concepts</span>
            
            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="Web/handling_requests_and_calling_the_next_handler.html">
            
            <span><b>2.3.</b> Handling requests and calling the next handler</span>
            
            
        </li>
    
        <li class="chapter " data-level="2.4" data-path="Web/routing_by_exact_path.html">
            
            <span><b>2.4.</b> Routing by exact path</span>
            
            
        </li>
    
        <li class="chapter " data-level="2.5" data-path="Web/Routing by paths that begin with something.html">
            
            <span><b>2.5.</b> Routing by paths that begin with something</span>
            
            
        </li>
    
        <li class="chapter " data-level="2.6" data-path="Web/Capturing path parameters.html">
            
            <span><b>2.6.</b> Capturing path parameters</span>
            
            
        </li>
    
        <li class="chapter " data-level="2.7" data-path="Web/Routing with regular expressions.html">
            
            <span><b>2.7.</b> Routing with regular expressions</span>
            
            
        </li>
    
        <li class="chapter " data-level="2.8" data-path="Web/Capturing path parameters with regular expressions.html">
            
            <span><b>2.8.</b> Capturing path parameters with regular expressions</span>
            
            
        </li>
    
        <li class="chapter " data-level="2.9" data-path="Web/Routing by HTTP method.html">
            
            <span><b>2.9.</b> Routing by HTTP method</span>
            
            
        </li>
    
        <li class="chapter " data-level="2.10" data-path="Web/Route order.html">
            
            <span><b>2.10.</b> Route order</span>
            
            
        </li>
    
        <li class="chapter " data-level="2.11" data-path="Web/Routing based on MIME type of request.html">
            
            <span><b>2.11.</b> Routing based on MIME type of request</span>
            
            
        </li>
    
        <li class="chapter " data-level="2.12" data-path="Web/Routing based on MIME types acceptable by the client.html">
            
            <span><b>2.12.</b> Routing based on MIME types acceptable by the client</span>
            
            
        </li>
    
        <li class="chapter " data-level="2.13" data-path="Web/Combining routing criteria.html">
            
            <span><b>2.13.</b> Combining routing criteria</span>
            
            
        </li>
    
        <li class="chapter " data-level="2.14" data-path="Web/Enabling and disabling routes.html">
            
            <span><b>2.14.</b> Enabling and disabling routes</span>
            
            
        </li>
    
        <li class="chapter " data-level="2.15" data-path="Web/Context data.html">
            
            <span><b>2.15.</b> Context data</span>
            
            
        </li>
    
        <li class="chapter " data-level="2.16" data-path="Web/Sub-routers.html">
            
            <span><b>2.16.</b> Sub-routers</span>
            
            
        </li>
    
        <li class="chapter " data-level="2.17" data-path="Web/Default 404 Handling.html">
            
            <span><b>2.17.</b> Default 404 Handling</span>
            
            
        </li>
    
        <li class="chapter " data-level="2.18" data-path="Web/Error handling.html">
            
            <span><b>2.18.</b> Error handling</span>
            
            
        </li>
    
        <li class="chapter " data-level="2.19" data-path="Web/Request body handling.html">
            
            <span><b>2.19.</b> Request body handling</span>
            
            
        </li>
    
        <li class="chapter " data-level="2.20" data-path="Web/handling_cookies.html">
            
            <span><b>2.20.</b> Handling cookies</span>
            
            
        </li>
    
        <li class="chapter " data-level="2.21" data-path="Web/handling_sessions.html">
            
            <span><b>2.21.</b> Handling sessions</span>
            
            
        </li>
    
        <li class="chapter " data-level="2.22" data-path="Web/authentication__authorisation.html">
            
            <span><b>2.22.</b> Authentication / authorisation</span>
            
            
        </li>
    
        <li class="chapter " data-level="2.23" data-path="Web/serving_static_resources.html">
            
            <span><b>2.23.</b> Serving static resources</span>
            
            
        </li>
    
        <li class="chapter " data-level="2.24" data-path="Web/cors_handling.html">
            
            <span><b>2.24.</b> CORS handling</span>
            
            
        </li>
    
        <li class="chapter " data-level="2.25" data-path="Web/templates.html">
            
            <span><b>2.25.</b> Templates</span>
            
            
        </li>
    
        <li class="chapter " data-level="2.26" data-path="Web/error_handler.html">
            
            <span><b>2.26.</b> Error handler</span>
            
            
        </li>
    
        <li class="chapter " data-level="2.27" data-path="Web/request_logger.html">
            
            <span><b>2.27.</b> Request logger</span>
            
            
        </li>
    
        <li class="chapter " data-level="2.28" data-path="Web/serving_favicons.html">
            
            <span><b>2.28.</b> Serving favicons</span>
            
            
        </li>
    
        <li class="chapter " data-level="2.29" data-path="Web/timeout_handler.html">
            
            <span><b>2.29.</b> Timeout handler</span>
            
            
        </li>
    
        <li class="chapter " data-level="2.30" data-path="Web/response_time_handler.html">
            
            <span><b>2.30.</b> Response time handler</span>
            
            
        </li>
    
        <li class="chapter " data-level="2.31" data-path="Web/sockjs.html">
            
            <span><b>2.31.</b> SockJS</span>
            
            
        </li>
    
        <li class="chapter " data-level="2.32" data-path="Web/sockjs_event_bus_bridge.html">
            
            <span><b>2.32.</b> SockJS event bus bridge</span>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3" data-path="Metrics and monitoring/metrics_and_monitoring.html">
            
                
                    <a href="../Metrics and monitoring/metrics_and_monitoring.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                        Metrics and monitoring
                    </a>
                
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1" data-path="Metrics and monitoring/features.html">
            
                
                    <a href="../Metrics and monitoring/features.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.</b>
                        
                        Features
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="Metrics and monitoring/getting_started.html">
            
                
                    <a href="../Metrics and monitoring/getting_started.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.2.</b>
                        
                        Getting started
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="Metrics and monitoring/metrics_service.html">
            
                
                    <a href="../Metrics and monitoring/metrics_service.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.3.</b>
                        
                        Metrics service
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="3.4" data-path="Metrics and monitoring/naming.html">
            
                
                    <a href="../Metrics and monitoring/naming.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.4.</b>
                        
                        Naming
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="3.5" data-path="Metrics and monitoring/retrieving_metrics.html">
            
                
                    <a href="../Metrics and monitoring/retrieving_metrics.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.5.</b>
                        
                        Retrieving metrics
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="3.6" data-path="Metrics and monitoring/data.html">
            
                
                    <a href="../Metrics and monitoring/data.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.6.</b>
                        
                        Data
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="3.7" data-path="Metrics and monitoring/the_metrics.html">
            
                
                    <a href="../Metrics and monitoring/the_metrics.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.7.</b>
                        
                        The metrics
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="3.8" data-path="Metrics and monitoring/jmx.html">
            
                
                    <a href="../Metrics and monitoring/jmx.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.8.</b>
                        
                        JMX
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="3.9" data-path="Metrics and monitoring/enabling_remote_jmx.html">
            
                
                    <a href="../Metrics and monitoring/enabling_remote_jmx.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.9.</b>
                        
                        Enabling remote JMX
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="3.10" data-path="Metrics and monitoring/accessing_dropwizard_registry.html">
            
                
                    <a href="../Metrics and monitoring/accessing_dropwizard_registry.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.10.</b>
                        
                        Accessing Dropwizard Registry
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4" data-path="Testing/testing.html">
            
            <span><b>4.</b> Testing</span>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1" data-path="Testing/writing_a_test_suite.html">
            
            <span><b>4.1.</b> Writing a test suite</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="Testing/asserting.html">
            
            <span><b>4.2.</b> Asserting</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.3" data-path="Testing/asynchronous_testing.html">
            
            <span><b>4.3.</b> Asynchronous testing</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.4" data-path="Testing/sharing_objects.html">
            
            <span><b>4.4.</b> Sharing objects</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.5" data-path="Testing/running.html">
            
            <span><b>4.5.</b> Running</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.6" data-path="Testing/reporting.html">
            
            <span><b>4.6.</b> Reporting</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.7" data-path="Testing/junit_integration.html">
            
            <span><b>4.7.</b> Junit integration</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.8" data-path="Testing/java_language_integration.html">
            
            <span><b>4.8.</b> Java language integration</span>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5" data-path="java/data_access.html">
            
            <span><b>5.</b> Data access</span>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.1" data-path="Data access/jdbc_client.html">
            
                
                    <a href="../Data access/jdbc_client.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.1.</b>
                        
                        JDBC client
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="5.2" data-path="Data access/vertx_mysql_-_postgresql_client.html">
            
                
                    <a href="../Data access/vertx_mysql_-_postgresql_client.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.2.</b>
                        
                        Vert.x MySQL - PostgreSQL client
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="5.3" data-path="Data access/common_sql_interface.html">
            
                
                    <a href="../Data access/common_sql_interface.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.3.</b>
                        
                        Common SQL interface
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="6" data-path="Authentication and Authorisation/authentication_and_authorisation.html">
            
            <span><b>6.</b> Authentication and Authorisation</span>
            
            
        </li>
    
        <li class="chapter " data-level="7" data-path="Reactive/index.html">
            
            <span><b>7.</b> Reactive</span>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="7.1" data-path="Reactive/vertx_rx.html">
            
            <span><b>7.1.</b> Vert.x Rx</span>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="7.1.1" data-path="Reactive/vertx_api_for_rxjava.html">
            
            <span><b>7.1.1.</b> Vert.x API for RxJava</span>
            
            
        </li>
    
        <li class="chapter " data-level="7.1.2" data-path="Reactive/rxified_api.html">
            
            <span><b>7.1.2.</b> Rxified API</span>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="7.2" data-path="Reactive/reactive_streams.html">
            
            <span><b>7.2.</b> Reactive streams</span>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="8" data-path="Messaging and Integration/messaging_and_integration.html">
            
                
                    <a href="../Messaging and Integration/messaging_and_integration.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.</b>
                        
                        Messaging and Integration
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="9" data-path="Services/services.html">
            
                
                    <a href="../Services/services.html">
                        <i class="fa fa-check"></i>
                        
                            <b>9.</b>
                        
                        Services
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="10" data-path="Cluster Managers/cluster_managers.html">
            
            <span><b>10.</b> Cluster Managers</span>
            
            
        </li>
    


        
        <li class="divider"></li>
        <li>
            <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                Published with GitBook
            </a>
        </li>
        
    </ul>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header">
    <!-- Actions Left -->
    <a href="#" class="btn pull-left toggle-summary" aria-label="Table of Contents"><i class="fa fa-align-justify"></i></a>
    <a href="#" class="btn pull-left toggle-search" aria-label="Search"><i class="fa fa-search"></i></a>
    
    <div id="font-settings-wrapper" class="dropdown pull-left">
        <a href="#" class="btn toggle-dropdown" aria-label="Font Settings"><i class="fa fa-font"></i>
        </a>
        <div class="dropdown-menu font-settings">
    <div class="dropdown-caret">
        <span class="caret-outer"></span>
        <span class="caret-inner"></span>
    </div>

    <div class="buttons">
        <button type="button" id="reduce-font-size" class="button size-2">A</button>
        <button type="button" id="enlarge-font-size" class="button size-2">A</button>
    </div>

    <div class="buttons font-family-list">
        <button type="button" data-font="0" class="button">Serif</button>
        <button type="button" data-font="1" class="button">Sans</button>
    </div>

    <div class="buttons color-theme-list">
        <button type="button" id="color-theme-preview-0" class="button size-3" data-theme="0">White</button>
        <button type="button" id="color-theme-preview-1" class="button size-3" data-theme="1">Sepia</button>
        <button type="button" id="color-theme-preview-2" class="button size-3" data-theme="2">Night</button>
    </div>
</div>

    </div>

    <!-- Actions Right -->
    
    <div class="dropdown pull-right">
        <a href="#" class="btn toggle-dropdown" aria-label="Share"><i class="fa fa-share-alt"></i>
        </a>
        <div class="dropdown-menu font-settings dropdown-left">
            <div class="dropdown-caret">
                <span class="caret-outer"></span>
                <span class="caret-inner"></span>
            </div>
            <div class="buttons">
                <button type="button" data-sharing="twitter" class="button">
                    Share on Twitter
                </button>
                <button type="button" data-sharing="google-plus" class="button">
                    Share on Google
                </button>
                <button type="button" data-sharing="facebook" class="button">
                    Share on Facebook
                </button>
                <button type="button" data-sharing="weibo" class="button">
                    Share on Weibo
                </button>
                <button type="button" data-sharing="instapaper" class="button">
                    Share on Instapaper
                </button>
            </div>
        </div>
    </div>
    

    
    <a href="#" target="_blank" class="btn pull-right google-plus-sharing-link sharing-link" data-sharing="google-plus" aria-label="Google"><i class="fa fa-google-plus"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right facebook-sharing-link sharing-link" data-sharing="facebook" aria-label="Facebook"><i class="fa fa-facebook"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right twitter-sharing-link sharing-link" data-sharing="twitter" aria-label="Twitter"><i class="fa fa-twitter"></i></a>
    
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../" >Vert.x 3.0 文档翻译</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <h1 id="tcp-server">TCP Server</h1>
<h2 id="creating-a-tcp-server">Creating a TCP server</h2>
<p>&#x6211;&#x4EEC;&#x4F7F;&#x7528;&#x9ED8;&#x8BA4;&#x7684;&#x9009;&#x9879;(<code>HttpServerOptions</code>)&#x6765;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x6700;&#x7B80;&#x5355;&#x7684;<code>TCP</code>&#x670D;&#x52A1;&#x5668;.</p>
<pre><code class="lang-java">NetServer server = vertx.createNetServer();
</code></pre>
<h2 id="configuring-a-tcp-server">Configuring a TCP server</h2>
<p>&#x5982;&#x679C;&#x60F3;&#x8981;&#x5BF9;&#x521B;&#x5EFA;&#x7684;&#x670D;&#x52A1;&#x5668;&#x8FDB;&#x884C;&#x7279;&#x6B8A;&#x914D;&#x7F6E;,&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<code>HttpServerOptions</code>&#x6765;&#x521B;&#x5EFA;&#x670D;&#x52A1;&#x5668;&#x3002;</p>
<pre><code class="lang-java">NetServerOptions options = <span class="hljs-keyword">new</span> NetServerOptions().setPort(<span class="hljs-number">4321</span>);
NetServer server = vertx.createNetServer(options);
</code></pre>
<h2 id="start-the-server-listening">Start the Server Listening</h2>
<p>&#x6211;&#x4EEC;&#x63D0;&#x4F9B;&#x4E86;&#x4F17;&#x591A;&#x7684;<code>listen</code>&#x65B9;&#x6CD5;,&#x4E0B;&#x9762;&#x6211;&#x4EEC;&#x9009;&#x62E9;&#x4E00;&#x4E2A;&#x4E0D;&#x5E26;&#x53C2;&#x6570;&#x7684;<code>listen</code>&#x65B9;&#x6CD5;(&#x7AEF;&#x53E3;&#x548C;&#x4E3B;&#x673A;&#x5730;&#x5740;&#x5DF2;&#x7ECF;&#x5728;&#x521A;&#x624D;&#x7684;<code>HttpServerOptions</code>&#x4E2D;&#x6307;&#x5B9A;&#x4E86;)</p>
<pre><code class="lang-java">NetServer server = vertx.createNetServer();
server.listen();
</code></pre>
<p>&#x4E0B;&#x9762;&#x6211;&#x4EEC;&#x5728;<code>listen</code>&#x65B9;&#x6CD5;&#x4E2D;&#x663E;&#x5F0F;&#x5730;&#x6307;&#x5B9A;&#x76D1;&#x542C;&#x7684;&#x7AEF;&#x53E3;&#x548C;&#x7F51;&#x5361;&#x5730;&#x5740;(&#x8FD9;&#x65F6;&#x5019;&#x4F1A;&#x5FFD;&#x7565;&#x6389;<code>HttpServerOptions</code>&#x4E2D;&#x8BBE;&#x7F6E;&#x7684;&#x7AEF;&#x53E3;&#x53F7;)</p>
<pre><code class="lang-java">NetServer server = vertx.createNetServer();
server.listen(<span class="hljs-number">1234</span>, <span class="hljs-string">&quot;localhost&quot;</span>);
</code></pre>
<p><code>listen</code>&#x65B9;&#x6CD5;&#x9ED8;&#x8BA4;&#x76D1;&#x542C;&#x7684;&#x5730;&#x5740;&#x662F;<code>0.0.0.0</code>(&#x6240;&#x6709;&#x53EF;&#x7528;&#x5730;&#x5740;),&#x9ED8;&#x8BA4;&#x7684;&#x7AEF;&#x53E3;&#x662F;0(&#x8FD9;&#x79CD;&#x60C5;&#x51B5;&#x4E0B;&#x4F1A;&#x968F;&#x673A;&#x9009;&#x62E9;&#x4E00;&#x4E2A;&#x53EF;&#x7528;&#x7684;&#x7AEF;&#x53E3;). &#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;&#x7ED1;&#x5B9A;&#x64CD;&#x4F5C;(<code>listen</code>)&#x662F;&#x5F02;&#x6B65;&#x8FDB;&#x884C;&#x7684;,&#x6240;&#x4EE5;&#x5F53;<code>listen</code>&#x65B9;&#x6CD5;&#x8FD4;&#x56DE;&#x4E4B;&#x540E;&#x5E76;&#x4E0D;&#x4FDD;&#x8BC1;&#x7ED1;&#x5B9A;&#x64CD;&#x4F5C;&#x5DF2;&#x7ECF;&#x6210;&#x529F;.
&#x5728;&#x793A;&#x4F8B;&#x4E2D;&#x6211;&#x4EEC;&#x6DFB;&#x52A0;&#x4E86;&#x4E00;&#x4E2A;<code>handler</code>&#x7528;&#x4E8E;&#x63A5;&#x53D7;&#x7ED1;&#x5B9A;&#x6210;&#x529F;&#x4E4B;&#x540E;&#x7684;&#x901A;&#x77E5;.</p>
<pre><code class="lang-java">NetServer server = vertx.createNetServer();
server.listen(<span class="hljs-number">1234</span>, <span class="hljs-string">&quot;localhost&quot;</span>, res -&gt; {
  <span class="hljs-keyword">if</span> (res.succeeded()) {
    System.out.println(<span class="hljs-string">&quot;Server is now listening!&quot;</span>);
  } <span class="hljs-keyword">else</span> {
    System.out.println(<span class="hljs-string">&quot;Failed to bind!&quot;</span>);
  }
});
</code></pre>
<h2 id="listening-on-a-random-port">Listening on a random port</h2>
<p>&#x5F53;&#x6211;&#x4EEC;&#x76D1;&#x542C;&#x7AEF;&#x53E3;&#x53F7;&#x4E3A;0&#x65F6;,&#x7CFB;&#x7EDF;&#x4F1A;&#x81EA;&#x52A8;&#x968F;&#x673A;&#x9009;&#x62E9;&#x4E00;&#x4E2A;&#x5B9E;&#x9645;&#x53EF;&#x7528;&#x7684;&#x7AEF;&#x53E3;&#x8FDB;&#x884C;&#x76D1;&#x542C;,&#x5982;&#x679C;&#x60F3;&#x8981;&#x83B7;&#x53D6;&#x771F;&#x5B9E;&#x76D1;&#x542C;&#x7AEF;&#x53E3;&#x53EF;&#x4EE5;&#x8C03;&#x7528;<code>actualPort</code>&#x65B9;&#x6CD5;.</p>
<pre><code class="lang-java">NetServer server = vertx.createNetServer();
server.listen(<span class="hljs-number">0</span>, <span class="hljs-string">&quot;localhost&quot;</span>, res -&gt; {
  <span class="hljs-keyword">if</span> (res.succeeded()) {
    System.out.println(<span class="hljs-string">&quot;Server is now listening on actual port: &quot;</span> + server.actualPort());
  } <span class="hljs-keyword">else</span> {
    System.out.println(<span class="hljs-string">&quot;Failed to bind!&quot;</span>);
  }
});
</code></pre>
<h2 id="getting-notified-of-incoming-connections">Getting notified of incoming connections</h2>
<p>&#x4E0B;&#x4F8B;&#x4E2D;&#x6211;&#x4EEC;&#x8BBE;&#x7F6E;&#x4E86;&#x4E00;&#x4E2A;<code>connectHandler</code>,&#x7528;&#x4E8E;&#x5904;&#x7406;&#x670D;&#x52A1;&#x5668;&#x63A5;&#x53D7;&#x5230;&#x7684;&#x7F51;&#x7EDC;&#x8FDE;&#x63A5;</p>
<pre><code class="lang-java">NetServer server = vertx.createNetServer();
server.connectHandler(socket -&gt; {
  <span class="hljs-comment">// Handle the connection in here</span>
});
</code></pre>
<p>&#x5F53;&#x7F51;&#x7EDC;&#x8FDE;&#x63A5;&#x5EFA;&#x7ACB;&#x6210;&#x529F;&#x4E4B;&#x540E;,<code>handler</code>&#x5C31;&#x4F1A;&#x81EA;&#x52A8;&#x88AB;&#x8C03;&#x7528;(&#x540C;&#x65F6;&#x4F1A;&#x5E26;&#x6709;&#x4E00;&#x4E2A;<code>NetSocket</code>&#x5BF9;&#x8C61;&#x4F5C;&#x4E3A;&#x53C2;&#x6570;)</p>
<p><code>NetSocket</code>&#x662F;&#x5BF9;&#x5B9E;&#x9645;&#x7F51;&#x7EDC;&#x8FDE;&#x63A5;&#x7684;&#x4E00;&#x4E2A;<code>&#x7C7B;Socket</code>&#x63A5;&#x53E3;&#x62BD;&#x8C61;(<code>socket-like interface</code>),&#x4F60;&#x53EF;&#x4EE5;&#x5728;&#x8FD9;&#x4E2A;&#x63A5;&#x53E3;&#x8FDB;&#x884C;&#x8BFB;&#x5199;&#x6570;&#x636E;,&#x6216;&#x8005;&#x76F4;&#x63A5;&#x5173;&#x95ED;Socket&#x7B49;&#x64CD;&#x4F5C;.</p>
<h2 id="reading-data-from-the-socket">Reading data from the socket</h2>
<p>To read data from the socket you set the handler on the socket.</p>
<p>&#x60F3;&#x8981;&#x8BFB;&#x53D6;Socket&#x4E2D;&#x7684;&#x6570;&#x636E;,&#x90A3;&#x4F60;&#x5C31;&#x9700;&#x8981;&#x8C03;&#x7528;<code>NetSocket</code>&#x7684;<code>handler</code>&#x65B9;&#x6CD5;,&#x8BBE;&#x7F6E;&#x4E00;&#x4E2A;<code>handler</code>,&#x7528;&#x4E8E;&#x5904;&#x7406;&#x6570;&#x636E;.</p>
<p>&#x5F53;Socket&#x6D41;&#x4E2D;&#x6709;&#x6570;&#x636E;&#x5230;&#x8FBE;&#x65F6;,&#x670D;&#x52A1;&#x5668;&#x5C31;&#x4F1A;&#x5C06;&#x63A5;&#x53D7;&#x5230;&#x7684;&#x6570;&#x636E;&#x5C01;&#x88C5;&#x6210;&#x4E00;&#x4E2A;<code>Buffer</code>&#x5BF9;&#x8C61;,&#x7136;&#x540E;&#x521A;&#x521A;&#x5728;<code>NetSocket</code>&#x4E0A;&#x8BBE;&#x7F6E;&#x7684;&#x90A3;&#x4E2A;<code>handler</code>&#x5C31;&#x4F1A;&#x88AB;&#x8C03;&#x7528;.</p>
<blockquote>
<p>&#x8003;&#x8651;&#x534A;&#x5305;&#x5904;&#x7406;</p>
<pre><code class="lang-java">NetServer server = vertx.createNetServer();
server.connectHandler(socket -&gt; {
  socket.handler(buffer -&gt; {
    System.out.println(<span class="hljs-string">&quot;I received some bytes: &quot;</span> + buffer.length());
  });
});
</code></pre>
</blockquote>
<h2 id="writing-data-to-a-socket">Writing data to a socket</h2>
<p>&#x4F60;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x8C03;&#x7528;<code>NetSocket</code>&#x7684;<code>write</code>&#x65B9;&#x6CD5;&#x8FDB;&#x884C;&#x5199;&#x56DE;&#x6570;&#x636E;</p>
<pre><code class="lang-java">Buffer buffer = Buffer.buffer().appendFloat(<span class="hljs-number">12.34f</span>).appendInt(<span class="hljs-number">123</span>);
socket.write(buffer);

<span class="hljs-comment">// Write a string in UTF-8 encoding</span>
socket.write(<span class="hljs-string">&quot;some data&quot;</span>);

<span class="hljs-comment">// Write a string using the specified encoding</span>
socket.write(<span class="hljs-string">&quot;some data&quot;</span>, <span class="hljs-string">&quot;UTF-16&quot;</span>);
</code></pre>
<blockquote>
<p>&#x6CE8;&#x610F;&#xFF0C;<code>write</code>&#x65B9;&#x6CD5;&#x4E00;&#x6837;&#x662F;&#x5F02;&#x6B65;&#x8FDB;&#x884C;&#x7684;,&#x5F53;<code>write</code>&#x65B9;&#x6CD5;&#x8FD4;&#x56DE;&#x540E;,&#x5E76;&#x4E0D;&#x4FDD;&#x8BC1;&#x6570;&#x636E;&#x5DF2;&#x7ECF;&#x5B8C;&#x5168;&#x5199;&#x5165;&#x5230;Socket&#x6D41;&#x4E2D;,&#x4E5F;&#x4E0D;&#x4FDD;&#x8BC1;&#x6570;&#x636E;&#x80FD;&#x591F;&#x5199;&#x5165;&#x6210;&#x529F;</p>
</blockquote>
<h2 id="closed-handler">Closed handler</h2>
<p>&#x4E0B;&#x4F8B;&#x4E2D;&#x6211;&#x4EEC;&#x8BBE;&#x7F6E;&#x4E86;&#x4E00;&#x4E2A;<code>closeHandler</code>&#x7528;&#x4E8E;&#x5F53;Socket&#x5173;&#x95ED;&#x65F6;,&#x83B7;&#x5F97;&#x4E00;&#x4E9B;&#x901A;&#x77E5;</p>
<pre><code class="lang-java">socket.closeHandler(v -&gt; {
  System.out.println(<span class="hljs-string">&quot;The socket has been closed&quot;</span>);
});
</code></pre>
<h2 id="handling-exceptions">Handling exceptions</h2>
<p>&#x5982;&#x679C;&#x4F60;&#x60F3;&#x5F53;socket&#x64CD;&#x4F5C;&#x53D1;&#x751F;&#x5F02;&#x5E38;&#x65F6;&#x83B7;&#x5F97;&#x901A;&#x77E5;,&#x4F60;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x4E00;&#x4E2A;<code>exceptionHandler</code></p>
<h2 id="event-bus-write-handler">Event bus write handler</h2>
<p>&#x6BCF;&#x4E00;&#x4E2A;Socket&#x90FD;&#x4F1A;&#x5728;<code>event bus</code>&#x4E0A;&#x81EA;&#x52A8;&#x6CE8;&#x518C;&#x4E00;&#x4E2A;<code>handler</code>,&#x4E00;&#x65E6;&#x8BE5;<code>handler</code>&#x63A5;&#x53D7;&#x5230;<code>Buffer</code>, <code>handler</code>&#x4F1A;&#x5C06;<code>Buffer</code>&#x5199;&#x5230;Socket&#x4E0A;.</p>
<p>&#x5229;&#x7528;&#x8FD9;&#x79CD;&#x7279;&#x6027;&#x4F60;&#x53EF;&#x4EE5;&#x5728;&#x4E0D;&#x540C;&#x7684;<code>verticle</code>&#x751A;&#x81F3;&#x4E0D;&#x540C;&#x7684;<code>Vertx</code>&#x5B9E;&#x4F8B;&#x91CC;&#x5BF9;&#x540C;&#x4E00;&#x4E2A;socket&#x5199;&#x6570;&#x636E;. &#x8FD9;&#x79CD;&#x529F;&#x80FD;&#x7684;&#x5B9E;&#x73B0;&#x65B9;&#x5F0F;&#x662F;<code>handler</code>&#x8EAB;&#x4E0A;&#x6709;&#x4E00;&#x4E2A;<code>writeHandlerID</code>,&#x8FD9;&#x4E2A;ID&#x662F;<code>handler</code>&#x5728;<code>event bus</code>&#x4E0A;&#x7684;&#x6CE8;&#x518C;&#x5730;&#x5740;,&#x4E0D;&#x540C;&#x7684;<code>verticle</code>&#x751A;&#x81F3;&#x4E0D;&#x540C;&#x7684;<code>Vertx</code>&#x5B9E;&#x4F8B;&#x5C31;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x8BE5;&#x5730;&#x5740;&#x5411;Socket&#x5199;&#x5165;&#x6570;&#x636E;&#x3002;</p>
<h2 id="local-and-remote-addresses">Local and remote addresses</h2>
<p>&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;<code>localAddress</code>&#x83B7;&#x5F97;<code>NetSocket</code>&#x7684;&#x672C;&#x5730;&#x5730;&#x5740;. &#x901A;&#x8FC7;<code>remoteAddress</code>&#x83B7;&#x5F97;&#x7F51;&#x7EDC;&#x5BF9;&#x7B49;&#x7AEF;&#x5730;&#x5740;.</p>
<h2 id="sending-files">Sending files</h2>
<p>&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;<code>sendFile</code>&#x76F4;&#x63A5;&#x5411;Socket&#x4E2D;&#x5199;&#x5165;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;. &#x8FD9;&#x662F;&#x4E00;&#x79CD;&#x975E;&#x5E38;&#x9AD8;&#x6548;&#x53D1;&#x9001;&#x6587;&#x4EF6;&#x7684;&#x65B9;&#x5F0F;,&#x5982;&#x679C;&#x64CD;&#x4F5C;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x652F;&#x6301;&#x7684;&#x8BDD;,&#x8FD9;&#x8FD8;&#x53EF;&#x4EE5;&#x88AB;OS&#x5185;&#x6838;&#x652F;&#x6301;</p>
<pre><code class="lang-java">socket.sendFile(<span class="hljs-string">&quot;myfile.dat&quot;</span>);
</code></pre>
<h2 id="streaming-sockets">Streaming sockets</h2>
<p>Instances of NetSocket are also ReadStream and WriteStream instances so they can be used to pump data to or from other read and write streams.</p>
<p>See the chapter on streams and pumps for more information.</p>
<p><code>NetSocket</code>&#x5B9E;&#x4F8B;&#x8FD8;&#x662F;<code>ReadStream</code>&#x548C;<code>WriteStream</code>&#x7684;&#x5B9E;&#x4F8B;,&#x56E0;&#x6B64;</p>
<h2 id="upgrading-connections-to-ssl-tls">Upgrading connections to SSL/TLS</h2>
<p>&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<code>upgradeToSsl</code>&#x65B9;&#x6CD5;&#x5C06;&#x4E00;&#x4E2A;&#x4E0D;&#x652F;&#x6301;<code>SSL/TLS</code>&#x7684;&#x8FDE;&#x63A5;&#x6539;&#x4E3A;&#x652F;&#x6301;<code>SSL/TLS</code>&#x7684;&#x8FDE;&#x63A5;,&#x5177;&#x4F53;&#x53C2;&#x8003;&#x76F8;&#x5173;&#x7AE0;&#x8282;</p>
<h2 id="closing-a-tcp-server">Closing a TCP Server</h2>
<p>&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x8C03;&#x7528;<code>close</code>&#x65B9;&#x6CD5;&#x5173;&#x95ED;&#x670D;&#x52A1;&#x5668;,<code>close</code>&#x65B9;&#x6CD5;&#x4F1A;&#x5173;&#x95ED;&#x6240;&#x6709;&#x6253;&#x5F00;&#x7684;&#x8FDE;&#x63A5;&#x548C;&#x6240;&#x6709;&#x7684;&#x670D;&#x52A1;&#x5668;&#x8D44;&#x6E90;.</p>
<p>&#x4E00;&#x6837;&#x4E00;&#x6837;&#x7684;,&#x5173;&#x95ED;&#x64CD;&#x4F5C;&#x540C;&#x6837;&#x662F;&#x5F02;&#x6B65;&#x7684;,&#x4F60;&#x61C2;&#x5F97;,&#x60F3;&#x8981;&#x5173;&#x95ED;&#x5B8C;&#x6210;&#x65F6;&#x8FDB;&#x884C;&#x67D0;&#x4E9B;&#x64CD;&#x4F5C;,&#x8BBE;&#x7F6E;handler&#x5427;.</p>
<pre><code class="lang-java">server.close(res -&gt; {
  <span class="hljs-keyword">if</span> (res.succeeded()) {
    System.out.println(<span class="hljs-string">&quot;Server is now closed&quot;</span>);
  } <span class="hljs-keyword">else</span> {
    System.out.println(<span class="hljs-string">&quot;close failed&quot;</span>);
  }
});
</code></pre>
<h2 id="automatic-clean-up-in-verticles">Automatic clean-up in verticles</h2>
<p>&#x5982;&#x679C;&#x4F60;&#x662F;&#x5728;<code>verticle</code>&#x4E2D;&#x521B;&#x5EFA;&#x7684;<code>TCP</code>&#x670D;&#x52A1;&#x5668;&#x548C;&#x5BA2;&#x6237;&#x7AEF;,&#x90A3;&#x4E48;&#x5F53;&#x5BBF;&#x4E3B;<code>verticle</code>&#x88AB;<code>undeployed</code>&#x65F6;,&#x5BBF;&#x4E3B;&#x8EAB;&#x4E0A;&#x7684;&#x670D;&#x52A1;&#x5668;&#x548C;&#x5BA2;&#x6237;&#x7AEF;&#x4E5F;&#x4F1A;&#x88AB;&#x81EA;&#x52A8;&#x7684;&#x5173;&#x95ED;&#x6389;</p>
<h2 id="scaling-sharing-tcp-servers">Scaling - sharing TCP servers</h2>
<p><code>TCP</code>&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x7684;&#x6240;&#x6709;<code>handler</code>&#x90FD;&#x53EA;&#x4F1A;&#x88AB;&#x76F8;&#x540C;&#x7684;<code>event loop</code>&#x6267;&#x884C;.</p>
<p>&#x8FD9;&#x610F;&#x5473;&#x7740;&#x5982;&#x679C;&#x4F60;&#x7684;&#x670D;&#x52A1;&#x5668;&#x662F;&#x8FD0;&#x884C;&#x5728;&#x4E00;&#x4E2A;&#x591A;&#x6838;&#x5FC3;&#x7684;&#x4E3B;&#x673A;&#x4E0A;,&#x4F46;&#x662F;&#x4F60;&#x5728;&#x8BE5;&#x4E3B;&#x673A;&#x4E0A;&#x53EA;&#x90E8;&#x7F72;&#x4E86;&#x4E00;&#x4E2A;&#x670D;&#x52A1;&#x5668;&#x5B9E;&#x4F8B;,&#x90A3;&#x4E48;&#x4F60;&#x6700;&#x591A;&#x4E5F;&#x5C31;&#x662F;&#x5229;&#x7528;&#x4E86;&#x4E3B;&#x673A;&#x4E0A;&#x7684;&#x4E00;&#x4E2A;&#x6838;&#x5FC3;.</p>
<p>&#x4E3A;&#x4E86;&#x80FD;&#x4F7F;&#x7528;&#x66F4;&#x591A;&#x7684;&#x6838;&#x5FC3;,&#x4F60;&#x9700;&#x8981;&#x5728;&#x8BE5;&#x4E3B;&#x673A;&#x4E0A;&#x90E8;&#x7F72;&#x591A;&#x4E2A;&#x670D;&#x52A1;&#x5668;&#x5B9E;&#x4F8B;. &#x4E0B;&#x9762;&#x7684;&#x793A;&#x4F8B;&#x6F14;&#x793A;&#x4E86;&#x5982;&#x4F55;&#x901A;&#x8FC7;&#x7F16;&#x7A0B;&#x7684;&#x65B9;&#x5F0F;&#x90E8;&#x7F72;&#x591A;&#x4E2A;&#x670D;&#x52A1;&#x5668;&#x5B9E;&#x4F8B;&#xFF1A;</p>
<pre><code class="lang-java"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {
  NetServer server = vertx.createNetServer();
  server.connectHandler(socket -&gt; {
    socket.handler(buffer -&gt; {
      <span class="hljs-comment">// Just echo back the data</span>
      socket.write(buffer);
    });
  });
  server.listen(<span class="hljs-number">1234</span>, <span class="hljs-string">&quot;localhost&quot;</span>);
}
</code></pre>
<p>&#x6216;&#x8005;&#x5982;&#x679C;&#x4F60;&#x7684;&#x670D;&#x52A1;&#x5668;&#x662F;&#x5728;<code>verticle</code>&#x5185;&#x5B9E;&#x73B0;&#x7684;,&#x90A3;&#x4E48;&#x4F60;&#x4E5F;&#x53EF;&#x4EE5;&#x5728;&#x547D;&#x4EE4;&#x884C;&#x4E2D;&#x901A;&#x8FC7;<code>-instances</code>&#x90E8;&#x7F72;&#x591A;&#x4E2A;&#x670D;&#x52A1;&#x5668;&#x5B9E;&#x4F8B;.</p>
<pre><code>vertx run com.mycompany.MyVerticle -instances 10
</code></pre><p>&#x4EE5;&#x53CA;&#x901A;&#x8FC7;&#x7F16;&#x7A0B;&#x7684;&#x65B9;&#x5F0F;&#x90E8;&#x7F72;&#x591A;&#x4E2A;&#x670D;&#x52A1;&#x5668;<code>verticle</code>&#x5B9E;&#x4F8B;</p>
<pre><code class="lang-java">DeploymentOptions options = <span class="hljs-keyword">new</span> DeploymentOptions().setInstances(<span class="hljs-number">10</span>);
vertx.deployVerticle(<span class="hljs-string">&quot;com.mycompany.MyVerticle&quot;</span>, options);
</code></pre>
<p>Once you do this you will find the echo server works functionally identically to before, but all your cores on your server can be utilised and more work can be handled.</p>
<p>At this point you might be asking yourself &apos;How can you have more than one server listening on the same host and port? Surely you will get port conflicts as soon as you try and deploy more than one instance?&apos;</p>
<p>Vert.x does a little magic here.*</p>
<p>When you deploy another server on the same host and port as an existing server it doesn&#x2019;t actually try and create a new server listening on the same host/port.</p>
<p>Instead it internally maintains just a single server, and, as incoming connections arrive it distributes them in a round-robin fashion to any of the connect handlers.</p>
<p>Consequently Vert.x TCP servers can scale over available cores while each instance remains single threaded.</p>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="../Core/writing_tcp_servers_and_clients.html" class="navigation navigation-prev " aria-label="Previous page: Writing TCP servers and clients"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../Core/tcp_client.html" class="navigation navigation-next " aria-label="Next page: TCP Client"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="../gitbook/app.js"></script>

<script>
require(["gitbook"], function(gitbook) {
    var config = {"fontSettings":{"theme":null,"family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
