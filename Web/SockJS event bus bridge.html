<!DOCTYPE HTML>
<html lang="en" >
    
    <head>
        
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=11; IE=10; IE=9; IE=8; IE=7; IE=EDGE" />
        <title>SockJS event bus bridge | Vert.x 3.0 文档翻译</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.0.1">
        
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">
        
    
    
    <link rel="next" href="../Metrics and monitoring/metrics_and_monitoring.html" />
    
    
    <link rel="prev" href="../Web/SockJS.html" />
    

        
    </head>
    <body>
        
        
    <link rel="stylesheet" href="../gitbook/style.css">
    
    

        
    <div class="book" data-level="2.33" data-basepath=".." data-revision="Tue Sep 01 2015 14:38:22 GMT+0800 (中国标准时间)">
    

<div class="book-summary">
    <div class="book-search">
        <input type="text" placeholder="Type to search" class="form-control" />
    </div>
    <ul class="summary">
        
        
        
        

        

        
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../index.html">
                        <i class="fa fa-check"></i>
                        
                        Introduction
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="1" data-path="Core/core.html">
            
                
                    <a href="../Core/core.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                        Core
                    </a>
                
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1" data-path="Core/in_the_beginning_there_was_vertx.html">
            
                
                    <a href="../Core/in_the_beginning_there_was_vertx.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.</b>
                        
                        In the beginning there was Vertx
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="Core/are_you_fluent.html">
            
                
                    <a href="../Core/are_you_fluent.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.2.</b>
                        
                        Are you fluent?
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="Core/dont_call_us,_well_call_you.html">
            
                
                    <a href="../Core/dont_call_us,_well_call_you.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.3.</b>
                        
                        Don’t call us we will call you.
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="Core/dont_block_me.html">
            
                
                    <a href="../Core/dont_block_me.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.4.</b>
                        
                        Don’t block me!
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="Core/reactor_and_multi-reactor.html">
            
                
                    <a href="../Core/reactor_and_multi-reactor.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.5.</b>
                        
                        Reactor and Multi-Reactor
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="Core/the_golden_rule_-_dont_block_the_event_loop.html">
            
                
                    <a href="../Core/the_golden_rule_-_dont_block_the_event_loop.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.6.</b>
                        
                        The Golden Rule - Don’t Block the Event Loop
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="Core/running_blocking_code.html">
            
                
                    <a href="../Core/running_blocking_code.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.7.</b>
                        
                        Running blocking code
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="Core/verticles.html">
            
                
                    <a href="../Core/verticles.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.8.</b>
                        
                        Verticles
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="Core/the_event_bus.html">
            
                
                    <a href="../Core/the_event_bus.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.9.</b>
                        
                        The Event Bus
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="Core/json.html">
            
                
                    <a href="../Core/json.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.10.</b>
                        
                        JSON
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="Core/buffers.html">
            
                
                    <a href="../Core/buffers.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.11.</b>
                        
                        Buffers
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="Core/writing_tcp_servers_and_clients.html">
            
                
                    <a href="../Core/writing_tcp_servers_and_clients.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.12.</b>
                        
                        Writing TCP servers and clients
                    </a>
                
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.12.1" data-path="Core/tcp_server.html">
            
                
                    <a href="../Core/tcp_server.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.12.1.</b>
                        
                        TCP Server
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="1.12.2" data-path="Core/tcp_client.html">
            
                
                    <a href="../Core/tcp_client.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.12.2.</b>
                        
                        TCP Client
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="1.12.3" data-path="Core/ssl_tls.html">
            
                
                    <a href="../Core/ssl_tls.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.12.3.</b>
                        
                        SSL TLS
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.13" data-path="Core/writing_http_servers_and_clients.html">
            
                
                    <a href="../Core/writing_http_servers_and_clients.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.13.</b>
                        
                        Writing HTTP servers and clients
                    </a>
                
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.13.1" data-path="Core/http_server.html">
            
                
                    <a href="../Core/http_server.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.13.1.</b>
                        
                        HTTP Server
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="1.13.2" data-path="Core/http_client.html">
            
                
                    <a href="../Core/http_client.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.13.2.</b>
                        
                        HTTP client
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.14" data-path="Core/using_shared_data_with_vertx.html">
            
                
                    <a href="../Core/using_shared_data_with_vertx.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.14.</b>
                        
                        Using Shared Data with Vert.x
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="1.15" data-path="Core/using_the_file_system_with_vertx.html">
            
                
                    <a href="../Core/using_the_file_system_with_vertx.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.15.</b>
                        
                        Using the file system with Vert.x
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="1.16" data-path="Core/datagram_sockets_udp.html">
            
                
                    <a href="../Core/datagram_sockets_udp.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.16.</b>
                        
                        Datagram sockets (UDP)
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="1.17" data-path="Core/dns_client.html">
            
                
                    <a href="../Core/dns_client.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.17.</b>
                        
                        DNS client
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="1.18" data-path="Core/streams.html">
            
                
                    <a href="../Core/streams.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.18.</b>
                        
                        Streams
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="1.19" data-path="Core/parse_tools.html">
            
                
                    <a href="../Core/parse_tools.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.19.</b>
                        
                        Parse tools
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="1.20" data-path="Core/thread_safety.html">
            
                
                    <a href="../Core/thread_safety.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.20.</b>
                        
                        Thread safety
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="1.21" data-path="Core/metrics_spi.html">
            
                
                    <a href="../Core/metrics_spi.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.21.</b>
                        
                        Metrics SPI
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="1.22" data-path="Core/clustering.html">
            
                
                    <a href="../Core/clustering.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.22.</b>
                        
                        Clustering
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="1.23" data-path="Core/security_notes.html">
            
                
                    <a href="../Core/security_notes.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.23.</b>
                        
                        Security notes
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2" data-path="Web/web.html">
            
                
                    <a href="../Web/web.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                        Web
                    </a>
                
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1" data-path="Web/Re-cap on Vert.x core HTTP servers.html">
            
                
                    <a href="../Web/Re-cap on Vert.x core HTTP servers.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.</b>
                        
                        Re-cap on Vert.x core HTTP servers
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="Web/Basic Vert.x-Web concepts.html">
            
                
                    <a href="../Web/Basic Vert.x-Web concepts.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.2.</b>
                        
                        Basic Vert.x-Web concepts
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="Web/Handling requests and calling the next handler.html">
            
                
                    <a href="../Web/Handling requests and calling the next handler.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.3.</b>
                        
                        Handling requests and calling the next handler
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="2.4" data-path="Web/Using blocking handlers.html">
            
                
                    <a href="../Web/Using blocking handlers.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.4.</b>
                        
                        Using blocking handlers
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="2.5" data-path="Web/Routing by exact path.html">
            
                
                    <a href="../Web/Routing by exact path.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.5.</b>
                        
                        Routing by exact path
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="2.6" data-path="Web/Routing by paths that begin with something.html">
            
                
                    <a href="../Web/Routing by paths that begin with something.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.6.</b>
                        
                        Routing by paths that begin with something
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="2.7" data-path="Web/Capturing path parameters.html">
            
                
                    <a href="../Web/Capturing path parameters.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.7.</b>
                        
                        Capturing path parameters
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="2.8" data-path="Web/Routing with regular expressions.html">
            
                
                    <a href="../Web/Routing with regular expressions.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.8.</b>
                        
                        Routing with regular expressions
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="2.9" data-path="Web/Capturing path parameters with regular expressions.html">
            
                
                    <a href="../Web/Capturing path parameters with regular expressions.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.9.</b>
                        
                        Capturing path parameters with regular expressions
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="2.10" data-path="Web/Routing by HTTP method.html">
            
                
                    <a href="../Web/Routing by HTTP method.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.10.</b>
                        
                        Routing by HTTP method
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="2.11" data-path="Web/Route order.html">
            
                
                    <a href="../Web/Route order.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.11.</b>
                        
                        Route order
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="2.12" data-path="Web/Routing based on MIME type of request.html">
            
                
                    <a href="../Web/Routing based on MIME type of request.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.12.</b>
                        
                        Routing based on MIME type of request
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="2.13" data-path="Web/Routing based on MIME types acceptable by the client.html">
            
                
                    <a href="../Web/Routing based on MIME types acceptable by the client.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.13.</b>
                        
                        Routing based on MIME types acceptable by the client
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="2.14" data-path="Web/Combining routing criteria.html">
            
                
                    <a href="../Web/Combining routing criteria.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.14.</b>
                        
                        Combining routing criteria
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="2.15" data-path="Web/Enabling and disabling routes.html">
            
                
                    <a href="../Web/Enabling and disabling routes.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.15.</b>
                        
                        Enabling and disabling routes
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="2.16" data-path="Web/Context data.html">
            
                
                    <a href="../Web/Context data.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.16.</b>
                        
                        Context data
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="2.17" data-path="Web/Sub-routers.html">
            
                
                    <a href="../Web/Sub-routers.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.17.</b>
                        
                        Sub-routers
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="2.18" data-path="Web/Default 404 Handling.html">
            
                
                    <a href="../Web/Default 404 Handling.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.18.</b>
                        
                        Default 404 Handling
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="2.19" data-path="Web/Error handling.html">
            
                
                    <a href="../Web/Error handling.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.19.</b>
                        
                        Error handling
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="2.20" data-path="Web/Request body handling.html">
            
                
                    <a href="../Web/Request body handling.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.20.</b>
                        
                        Request body handling
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="2.21" data-path="Web/Handling cookies.html">
            
                
                    <a href="../Web/Handling cookies.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.21.</b>
                        
                        Handling cookies
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="2.22" data-path="Web/Handling sessions.html">
            
                
                    <a href="../Web/Handling sessions.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.22.</b>
                        
                        Handling sessions
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="2.23" data-path="Web/Authentication - authorisation.html">
            
                
                    <a href="../Web/Authentication - authorisation.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.23.</b>
                        
                        Authentication - authorisation
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="2.24" data-path="Web/Serving static resources.html">
            
                
                    <a href="../Web/Serving static resources.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.24.</b>
                        
                        Serving static resources
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="2.25" data-path="Web/CORS handling.html">
            
                
                    <a href="../Web/CORS handling.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.25.</b>
                        
                        CORS handling
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="2.26" data-path="Web/Templates.html">
            
                
                    <a href="../Web/Templates.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.26.</b>
                        
                        Templates
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="2.27" data-path="Web/Error handler.html">
            
                
                    <a href="../Web/Error handler.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.27.</b>
                        
                        Error handler
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="2.28" data-path="Web/Request logger.html">
            
                
                    <a href="../Web/Request logger.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.28.</b>
                        
                        Request logger
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="2.29" data-path="Web/Serving favicons.html">
            
                
                    <a href="../Web/Serving favicons.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.29.</b>
                        
                        Serving favicons
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="2.30" data-path="Web/Timeout handler.html">
            
                
                    <a href="../Web/Timeout handler.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.30.</b>
                        
                        Timeout handler
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="2.31" data-path="Web/Response time handler.html">
            
                
                    <a href="../Web/Response time handler.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.31.</b>
                        
                        Response time handler
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="2.32" data-path="Web/SockJS.html">
            
                
                    <a href="../Web/SockJS.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.32.</b>
                        
                        SockJS
                    </a>
                
            
            
        </li>
    
        <li class="chapter active" data-level="2.33" data-path="Web/SockJS event bus bridge.html">
            
                
                    <a href="../Web/SockJS event bus bridge.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.33.</b>
                        
                        SockJS event bus bridge
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3" data-path="Metrics and monitoring/metrics_and_monitoring.html">
            
                
                    <a href="../Metrics and monitoring/metrics_and_monitoring.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                        Metrics and monitoring
                    </a>
                
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1" data-path="Metrics and monitoring/features.html">
            
                
                    <a href="../Metrics and monitoring/features.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.</b>
                        
                        Features
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="Metrics and monitoring/getting_started.html">
            
                
                    <a href="../Metrics and monitoring/getting_started.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.2.</b>
                        
                        Getting started
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="Metrics and monitoring/metrics_service.html">
            
                
                    <a href="../Metrics and monitoring/metrics_service.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.3.</b>
                        
                        Metrics service
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="3.4" data-path="Metrics and monitoring/naming.html">
            
                
                    <a href="../Metrics and monitoring/naming.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.4.</b>
                        
                        Naming
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="3.5" data-path="Metrics and monitoring/retrieving_metrics.html">
            
                
                    <a href="../Metrics and monitoring/retrieving_metrics.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.5.</b>
                        
                        Retrieving metrics
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="3.6" data-path="Metrics and monitoring/data.html">
            
                
                    <a href="../Metrics and monitoring/data.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.6.</b>
                        
                        Data
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="3.7" data-path="Metrics and monitoring/the_metrics.html">
            
                
                    <a href="../Metrics and monitoring/the_metrics.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.7.</b>
                        
                        The metrics
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="3.8" data-path="Metrics and monitoring/jmx.html">
            
                
                    <a href="../Metrics and monitoring/jmx.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.8.</b>
                        
                        JMX
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="3.9" data-path="Metrics and monitoring/enabling_remote_jmx.html">
            
                
                    <a href="../Metrics and monitoring/enabling_remote_jmx.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.9.</b>
                        
                        Enabling remote JMX
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="3.10" data-path="Metrics and monitoring/accessing_dropwizard_registry.html">
            
                
                    <a href="../Metrics and monitoring/accessing_dropwizard_registry.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.10.</b>
                        
                        Accessing Dropwizard Registry
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4" data-path="Testing/testing.html">
            
            <span><b>4.</b> Testing</span>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1" data-path="Testing/writing_a_test_suite.html">
            
            <span><b>4.1.</b> Writing a test suite</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="Testing/asserting.html">
            
            <span><b>4.2.</b> Asserting</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.3" data-path="Testing/asynchronous_testing.html">
            
            <span><b>4.3.</b> Asynchronous testing</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.4" data-path="Testing/sharing_objects.html">
            
            <span><b>4.4.</b> Sharing objects</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.5" data-path="Testing/running.html">
            
            <span><b>4.5.</b> Running</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.6" data-path="Testing/reporting.html">
            
            <span><b>4.6.</b> Reporting</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.7" data-path="Testing/junit_integration.html">
            
            <span><b>4.7.</b> Junit integration</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.8" data-path="Testing/java_language_integration.html">
            
            <span><b>4.8.</b> Java language integration</span>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5" data-path="java/data_access.html">
            
            <span><b>5.</b> Data access</span>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.1" data-path="Data access/jdbc_client.html">
            
                
                    <a href="../Data access/jdbc_client.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.1.</b>
                        
                        JDBC client
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="5.2" data-path="Data access/vertx_mysql_-_postgresql_client.html">
            
                
                    <a href="../Data access/vertx_mysql_-_postgresql_client.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.2.</b>
                        
                        Vert.x MySQL - PostgreSQL client
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="5.3" data-path="Data access/common_sql_interface.html">
            
                
                    <a href="../Data access/common_sql_interface.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.3.</b>
                        
                        Common SQL interface
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="6" data-path="Authentication and Authorisation/authentication_and_authorisation.html">
            
            <span><b>6.</b> Authentication and Authorisation</span>
            
            
        </li>
    
        <li class="chapter " data-level="7" data-path="Reactive/index.html">
            
            <span><b>7.</b> Reactive</span>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="7.1" data-path="Reactive/vertx_rx.html">
            
            <span><b>7.1.</b> Vert.x Rx</span>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="7.1.1" data-path="Reactive/vertx_api_for_rxjava.html">
            
            <span><b>7.1.1.</b> Vert.x API for RxJava</span>
            
            
        </li>
    
        <li class="chapter " data-level="7.1.2" data-path="Reactive/rxified_api.html">
            
            <span><b>7.1.2.</b> Rxified API</span>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="7.2" data-path="Reactive/reactive_streams.html">
            
            <span><b>7.2.</b> Reactive streams</span>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="8" data-path="Messaging and Integration/messaging_and_integration.html">
            
                
                    <a href="../Messaging and Integration/messaging_and_integration.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.</b>
                        
                        Messaging and Integration
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="9" data-path="Services/services.html">
            
                
                    <a href="../Services/services.html">
                        <i class="fa fa-check"></i>
                        
                            <b>9.</b>
                        
                        Services
                    </a>
                
            
            
        </li>
    
        <li class="chapter " data-level="10" data-path="Cluster Managers/cluster_managers.html">
            
            <span><b>10.</b> Cluster Managers</span>
            
            
        </li>
    


        
        <li class="divider"></li>
        <li>
            <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                Published with GitBook
            </a>
        </li>
        
    </ul>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header">
    <!-- Actions Left -->
    <a href="#" class="btn pull-left toggle-summary" aria-label="Table of Contents"><i class="fa fa-align-justify"></i></a>
    <a href="#" class="btn pull-left toggle-search" aria-label="Search"><i class="fa fa-search"></i></a>
    
    <div id="font-settings-wrapper" class="dropdown pull-left">
        <a href="#" class="btn toggle-dropdown" aria-label="Font Settings"><i class="fa fa-font"></i>
        </a>
        <div class="dropdown-menu font-settings">
    <div class="dropdown-caret">
        <span class="caret-outer"></span>
        <span class="caret-inner"></span>
    </div>

    <div class="buttons">
        <button type="button" id="reduce-font-size" class="button size-2">A</button>
        <button type="button" id="enlarge-font-size" class="button size-2">A</button>
    </div>

    <div class="buttons font-family-list">
        <button type="button" data-font="0" class="button">Serif</button>
        <button type="button" data-font="1" class="button">Sans</button>
    </div>

    <div class="buttons color-theme-list">
        <button type="button" id="color-theme-preview-0" class="button size-3" data-theme="0">White</button>
        <button type="button" id="color-theme-preview-1" class="button size-3" data-theme="1">Sepia</button>
        <button type="button" id="color-theme-preview-2" class="button size-3" data-theme="2">Night</button>
    </div>
</div>

    </div>

    <!-- Actions Right -->
    
    <div class="dropdown pull-right">
        <a href="#" class="btn toggle-dropdown" aria-label="Share"><i class="fa fa-share-alt"></i>
        </a>
        <div class="dropdown-menu font-settings dropdown-left">
            <div class="dropdown-caret">
                <span class="caret-outer"></span>
                <span class="caret-inner"></span>
            </div>
            <div class="buttons">
                <button type="button" data-sharing="twitter" class="button">
                    Share on Twitter
                </button>
                <button type="button" data-sharing="google-plus" class="button">
                    Share on Google
                </button>
                <button type="button" data-sharing="facebook" class="button">
                    Share on Facebook
                </button>
                <button type="button" data-sharing="weibo" class="button">
                    Share on Weibo
                </button>
                <button type="button" data-sharing="instapaper" class="button">
                    Share on Instapaper
                </button>
            </div>
        </div>
    </div>
    

    
    <a href="#" target="_blank" class="btn pull-right google-plus-sharing-link sharing-link" data-sharing="google-plus" aria-label="Google"><i class="fa fa-google-plus"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right facebook-sharing-link sharing-link" data-sharing="facebook" aria-label="Facebook"><i class="fa fa-facebook"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right twitter-sharing-link sharing-link" data-sharing="twitter" aria-label="Twitter"><i class="fa fa-twitter"></i></a>
    
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../" >Vert.x 3.0 文档翻译</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <p>SockJS event bus bridge
Vert.x-Web comes with a built-in SockJS socket handler called the event bus bridge which effectively extends the server-side Vert.x event bus into client side JavaScript.</p>
<p>This creates a distributed event bus which not only spans multiple Vert.x instances on the server side, but includes client side JavaScript running in browsers.</p>
<p>We can therefore create a huge distributed bus encompassing many browsers and servers. The browsers don&#x2019;t have to be connected to the same server as long as the servers are connected.</p>
<p>This is done by providing a simple client side JavaScript library called vertxbus.js which provides an API very similar to the server-side Vert.x event-bus API, which allows you to send and publish messages to the event bus and register handlers to receive messages.</p>
<p>This JavaScript library uses the JavaScript SockJS client to tunnel the event bus traffic over SockJS connections terminating at at a SockJSHandler on the server-side.</p>
<p>A special SockJS socket handler is then installed on the SockJSHandler which handles the SockJS data and bridges it to and from the server side event bus.</p>
<p>To activate the bridge you simply call bridge on the SockJS handler.</p>
<p>Router router = Router.router(vertx);</p>
<p>SockJSHandler sockJSHandler = SockJSHandler.create(vertx);
BridgeOptions options = new BridgeOptions();
sockJSHandler.bridge(options);</p>
<p>router.route(&quot;/eventbus/*&quot;).handler(sockJSHandler);
In client side JavaScript you use the &apos;vertxbus.js` library to create connections to the event bus and to send and receive messages:</p>
<script src="http://cdn.sockjs.org/sockjs-0.3.4.min.js"></script>
<script src="vertxbus.js"></script>

<script>

<p>var eb = new vertx.EventBus(&#39;<a href="http://localhost:8080/eventbus">http://localhost:8080/eventbus</a>&#39;);</p>
<p>eb.onopen = function() {</p>
<p>  // set a handler to receive a message
  eb.registerHandler(&#39;some-address&#39;, function(message) {
    console.log(&#39;received a message: &#39; + JSON.stringify(message);
  });</p>
<p>  // send a message
  eb.send(&#39;some-address&#39;, {name: &#39;tim&#39;, age: 587});</p>
<p>}</p>
<p></script>
The first thing the example does is to create a instance of the event bus<p></p>
<p>var eb = new vertx.EventBus(&apos;<a href="http://localhost:8080/eventbus" target="_blank">http://localhost:8080/eventbus</a>&apos;);
The parameter to the constructor is the URI where to connect to the event bus. Since we create our bridge with the prefix eventbus we will connect there.</p>
<p>You can&#x2019;t actually do anything with the connection until it is opened. When it is open the onopen handler will be called.</p>
<p>Securing the Bridge
If you started a bridge like in the above example without securing it, and attempted to send messages through it you&#x2019;d find that the messages mysteriously disappeared. What happened to them?</p>
<p>For most applications you probably don&#x2019;t want client side JavaScript being able to send just any message to any handlers on the server side or to all other browsers.</p>
<p>For example, you may have a service on the event bus which allows data to be accessed or deleted. We don&#x2019;t want badly behaved or malicious clients being able to delete all the data in your database!</p>
<p>Also, we don&#x2019;t necessarily want any client to be able to listen in on any event bus address.</p>
<p>To deal with this, a SockJS bridge will by default refuse to let through any messages. It&#x2019;s up to you to tell the bridge what messages are ok for it to pass through. (There is an exception for reply messages which are always allowed through).</p>
<p>In other words the bridge acts like a kind of firewall which has a default deny-all policy.</p>
<p>Configuring the bridge to tell it what messages it should pass through is easy.</p>
<p>You can specify which matches you want to allow for inbound and outbound traffic using the BridgeOptions that you pass in when calling bridge.</p>
<p>Each match is a PermittedOptions object:</p>
<p>setAddress
This represents the exact address the message is being sent to. If you want to allow messages based on an exact address you use this field.</p>
<p>setAddressRegex
This is a regular expression that will be matched against the address. If you want to allow messages based on a regular expression you use this field. If the address field is specified this field will be ignored.</p>
<p>setMatch
This allows you to allow messages based on their structure. Any fields in the match must exist in the message with the same values for them to be allowed. This currently only works with JSON messages.
If a message is in-bound (i.e. being sent from client side JavaScript to the server) when it is received Vert.x-Web will look through any inbound permitted matches. If any match, it will be allowed through.</p>
<p>If a message is out-bound (i.e. being sent from the server to client side JavaScript) before it is sent to the client Vert.x-Web will look through any inbound permitted matches. If any match, it will be allowed through.</p>
<p>The actual matching works as follows:</p>
<p>If an address field has been specified then the address must match exactly with the address of the message for it to be considered matched.</p>
<p>If an address field has not been specified and an addressRegex field has been specified then the regular expression in address_re must match with the address of the message for it to be considered matched.</p>
<p>If a match field has been specified, then also the structure of the message must match. Structuring matching works by looking at all the fields and values in the match object and checking they all exist in the actual message body.</p>
<p>Here&#x2019;s an example:</p>
<p>Router router = Router.router(vertx);</p>
<p>SockJSHandler sockJSHandler = SockJSHandler.create(vertx);</p>
<p>// Let through any messages sent to &apos;demo.orderMgr&apos; from the client
PermittedOptions inboundPermitted1 = new PermittedOptions().setAddress(&quot;demo.orderMgr&quot;);</p>
<p>// Allow calls to the address &apos;demo.persistor&apos; from the client as long as the messages
// have an action field with value &apos;find&apos; and a collection field with value
// &apos;albums&apos;
PermittedOptions inboundPermitted2 = new PermittedOptions().setAddress(&quot;demo.persistor&quot;)
    .setMatch(new JsonObject().put(&quot;action&quot;, &quot;find&quot;)
        .put(&quot;collection&quot;, &quot;albums&quot;));</p>
<p>// Allow through any message with a field <code>wibble</code> with value <code>foo</code>.
PermittedOptions inboundPermitted3 = new PermittedOptions().setMatch(new JsonObject().put(&quot;wibble&quot;, &quot;foo&quot;));</p>
<p>// First let&apos;s define what we&apos;re going to allow from server -&gt; client</p>
<p>// Let through any messages coming from address &apos;ticker.mystock&apos;
PermittedOptions outboundPermitted1 = new PermittedOptions().setAddress(&quot;ticker.mystock&quot;);</p>
<p>// Let through any messages from addresses starting with &quot;news.&quot; (e.g. news.europe, news.usa, etc)
PermittedOptions outboundPermitted2 = new PermittedOptions().setAddressRegex(&quot;news\..+&quot;);</p>
<p>// Let&apos;s define what we&apos;re going to allow from client -&gt; server
BridgeOptions options = new BridgeOptions().
    addInboundPermitted(inboundPermitted1).
    addInboundPermitted(inboundPermitted1).
    addInboundPermitted(inboundPermitted3).
    addOutboundPermitted(outboundPermitted1).
    addOutboundPermitted(outboundPermitted2);</p>
<p>sockJSHandler.bridge(options);</p>
<p>router.route(&quot;/eventbus/*&quot;).handler(sockJSHandler);
Requiring authorisation for messages
The event bus bridge can also be configured to use the Vert.x-Web authorisation functionality to require authorisation for messages, either in-bound or out-bound on the bridge.</p>
<p>To do this, you can add extra fields to the match described in the previous section that determine what authority is required for the match.</p>
<p>To declare that a specific authority for the logged-in user is required in order to access allow the messages you use the setRequiredAuthority field.</p>
<p>Here&#x2019;s an example:</p>
<p>PermittedOptions inboundPermitted = new PermittedOptions().setAddress(&quot;demo.orderService&quot;);</p>
<p>// But only if the user is logged in and has the authority &quot;place_orders&quot;
inboundPermitted.setRequiredAuthority(&quot;place_orders&quot;);</p>
<p>BridgeOptions options = new BridgeOptions().addInboundPermitted(inboundPermitted);
For the user to be authorised they must be first logged in and secondly have the required authority.</p>
<p>To handle the login and actually auth you can configure the normal Vert.x auth handlers. For example:</p>
<p>Router router = Router.router(vertx);</p>
<p>// Let through any messages sent to &apos;demo.orderService&apos; from the client
PermittedOptions inboundPermitted = new PermittedOptions().setAddress(&quot;demo.orderService&quot;);</p>
<p>// But only if the user is logged in and has the authority &quot;place_orders&quot;
inboundPermitted.setRequiredAuthority(&quot;place_orders&quot;);</p>
<p>SockJSHandler sockJSHandler = SockJSHandler.create(vertx);
sockJSHandler.bridge(new BridgeOptions().
        addInboundPermitted(inboundPermitted));</p>
<p>// Now set up some basic auth handling:</p>
<p>router.route().handler(CookieHandler.create());
router.route().handler(SessionHandler.create(LocalSessionStore.create(vertx)));</p>
<p>AuthHandler basicAuthHandler = BasicAuthHandler.create(authProvider);</p>
<p>router.route(&quot;/eventbus/*&quot;).handler(basicAuthHandler);</p>
<p>router.route(&quot;/eventbus/*&quot;).handler(sockJSHandler);
Handling event bus bridge events
If you want to be notified when an event occurs on the bridge you can provide a handler when calling bridge.</p>
<p>Whenever an event occurs on the bridge it will be passed to the handler. The event is described by an instance of BridgeEvent.</p>
<p>The event can be one of the following types:</p>
<p>SOCKET_CREATED
This event will occur when a new SockJS socket is created.</p>
<p>SOCKET_CLOSED
This event will occur when a SockJS socket is closed.</p>
<p>SEND
This event will occur when a message is attempted to be sent from the client to the server.</p>
<p>PUBLISH
This event will occur when a message is attempted to be published from the client to the server.</p>
<p>RECEIVE
This event will occur when a message is attempted to be delivered from the server to the client. REGISTER. This event will occur when a client attempts to register a handler. UNREGISTER. This event will occur when a client attempts to unregister a handler.
The event enables you to retrieve the type using type and inspect the raw message of the event using rawMessage.</p>
<p>The raw message is a JSON object with the following structure:</p>
<p>{
  &quot;type&quot;: &quot;send&quot;|&quot;publish&quot;|&quot;receive&quot;|&quot;register&quot;|&quot;unregister&quot;,
  &quot;address&quot;: the event bus address being sent/published/registered/unregistered
  &quot;body&quot;: the body of the message
}
The event is also an instance of Future. When you are finished handling the event you can complete the future with true to enable further processing.</p>
<p>If you don&#x2019;t want the event to be processed you can complete the future with false. This is a useful feature that enables you to do your own filtering on messages passing through the bridge, or perhaps apply some fine grained authorisation or metrics.</p>
<p>Here&#x2019;s an example where we reject all messages flowing through the bridge if they contain the word &quot;Armadillos&quot;.</p>
<p>Router router = Router.router(vertx);</p>
<p>// Let through any messages sent to &apos;demo.orderMgr&apos; from the client
PermittedOptions inboundPermitted = new PermittedOptions().setAddress(&quot;demo.someService&quot;);</p>
<p>SockJSHandler sockJSHandler = SockJSHandler.create(vertx);
BridgeOptions options = new BridgeOptions().addInboundPermitted(inboundPermitted);</p>
<p>sockJSHandler.bridge(options, be -&gt; {
  if (be.type() == BridgeEvent.Type.PUBLISH || be.type() == BridgeEvent.Type.RECEIVE) {
    if (be.rawMessage().getString(&quot;body&quot;).equals(&quot;armadillos&quot;)) {
      // Reject it
      be.complete(false);
      return;
    }
  }
  be.complete(true);
});</p>
<p>router.route(&quot;/eventbus&quot;).handler(sockJSHandler);
You can also amend the raw message, e.g. change the body. For messages that are flowing in from the client you can also add headers to the message, here&#x2019;s an example:</p>
<p>Router router = Router.router(vertx);</p>
<p>// Let through any messages sent to &apos;demo.orderService&apos; from the client
PermittedOptions inboundPermitted = new PermittedOptions().setAddress(&quot;demo.orderService&quot;);</p>
<p>SockJSHandler sockJSHandler = SockJSHandler.create(vertx);
BridgeOptions options = new BridgeOptions().addInboundPermitted(inboundPermitted);</p>
<p>sockJSHandler.bridge(options, be -&gt; {
  if (be.type() == BridgeEvent.Type.PUBLISH || be.type() == BridgeEvent.Type.SEND) {
    // Add some headers
    JsonObject headers = new JsonObject().put(&quot;header1&quot;, &quot;val&quot;).put(&quot;header2&quot;, &quot;val2&quot;);
    be.rawMessage().put(&quot;headers&quot;, headers);
  }
  be.complete(true);
});</p>
<p>router.route(&quot;/eventbus&quot;).handler(sockJSHandler);</p>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="../Web/SockJS.html" class="navigation navigation-prev " aria-label="Previous page: SockJS"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../Metrics and monitoring/metrics_and_monitoring.html" class="navigation navigation-next " aria-label="Next page: Metrics and monitoring"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="../gitbook/app.js"></script>

<script>
require(["gitbook"], function(gitbook) {
    var config = {"fontSettings":{"theme":null,"family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
